(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),l=a.n(o),s=(a(62),a(20)),i=(a(63),a(12)),c=a(13),u=a(16),m=a(14),h=a(17),p=a(107),d=a(15),f=a(52),g=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).links=[{name:"User Profile",to:{pathname:"/profile"},private:!0,key:"profile"},{name:"Log Out",to:{pathname:"/",search:"?logout=true"},private:!0,key:"logout"},{name:"Log In",to:{pathname:"/"},private:!1,key:"home"},{name:"Sign Up",to:{pathname:"/signup"},private:!1,key:"signup"}],a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"buildLinks",value:function(){var e=this;return this.links.map(function(t,a){return e.props.loggedIn===t.private?r.a.createElement(p.a.Item,{key:a},r.a.createElement(f.LinkContainer,{to:t.to,exact:!0},r.a.createElement(p.a.Link,{eventKey:t.key},t.name))):null})}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"justify-content-center",variant:"pills",activeKey:"home"},this.buildLinks())}}]),t}(n.Component),E=Object(d.b)(function(e){return{loggedIn:e.auth.authorized}})(Object(s.k)(g)),b=a(7),v=a(104),y=a(108),w=a(106),O=a(105),j=a(18),C=a.n(j),k=function(e){return{type:"AUTHORIZED",authorized:e}},S=function(e){var t=e.errors.map(function(e,t){return r.a.createElement("li",{key:t},e.message)});return r.a.createElement("div",null,t.length?r.a.createElement(y.a,{variant:"danger"},r.a.createElement("ul",null,t)):null)},L=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={login:{email:"",password:""},errors:[],registered:!1},a.handleSubmit=function(e){e.preventDefault(),C.a.post("/api/authenticate",a.state.login).then(function(e){e.data&&(a.props.authorized(!0),a.props.history.push({pathname:"/profile"}))}).catch(function(e){var t=[{message:"Something went wrong, please try again"}];401===e.response.status&&e.response.data.error&&(t=[e.response.data.error]),a.setState(function(e){return Object(b.a)({},e,{errors:t})})})},a.handleChange=function(e){var t=Object(b.a)({},a.state);t.login[e.target.name]=e.target.value,a.setState(t)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;"?logout=true"===this.props.location.search&&C.a.post("/logout").then(function(t){e.props.authorized(!1),e.props.history.push({pathname:"/"})}).catch(function(t){e.setState(function(e){return Object(b.a)({},e,{errors:[{message:"There was a problem logging out"}]})})}),"?registered=true"===this.props.location.search&&(this.setState(function(e){return Object(b.a)({},e,{registered:!0})}),this.props.history.push({pathname:"/"}))}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(S,{errors:this.state.errors}),this.state.registered?r.a.createElement(y.a,{variant:"success"},"Registration compete. Please login."):null,r.a.createElement(w.a,{onSubmit:this.handleSubmit},r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Email address"),r.a.createElement(w.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:this.handleChange})),r.a.createElement(w.a.Group,{controlId:"formBasicPassword"},r.a.createElement(w.a.Label,null,"Password"),r.a.createElement(w.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:this.handleChange})),r.a.createElement(O.a,{variant:"primary",type:"submit",block:!0},"Login")))}}]),t}(n.Component),I=Object(d.b)(function(e){return{loggedIn:e.auth.authorized}},function(e){return{authorized:function(t){return e(k(t))}}})(Object(s.k)(L)),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={profile:{first_name:"",last_name:"",email:"",password:""},errors:[]},a.handleSubmit=function(e){e.preventDefault(),C.a.post("/api/users",a.state.profile).then(function(e){e.data&&(a.setState(function(e){return Object(b.a)({},e,{error:[]})}),a.props.history.push({pathname:"/",search:"?registered=true"}))}).catch(function(e){console.log(e.response.data.error);var t=[{message:"Something went wrong, please try again"}];400===e.response.status&&e.response.data.error&&(t=e.response.data.error),a.setState(function(e){return Object(b.a)({},e,{errors:t})})})},a.handleChange=function(e){var t=Object(b.a)({},a.state);t.profile[e.target.name]=e.target.value,a.setState(t)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(S,{errors:this.state.errors}),r.a.createElement(w.a,{onSubmit:this.handleSubmit},r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"First Name"),r.a.createElement(w.a.Control,{type:"text",name:"first_name",placeholder:"Enter First Name",onChange:this.handleChange})),r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Last Name"),r.a.createElement(w.a.Control,{type:"text",name:"last_name",placeholder:"Enter Last Name",onChange:this.handleChange})),r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Email address"),r.a.createElement(w.a.Control,{type:"email",name:"email",placeholder:"Enter email",onChange:this.handleChange})),r.a.createElement(w.a.Group,{controlId:"formBasicPassword"},r.a.createElement(w.a.Label,null,"Password"),r.a.createElement(w.a.Control,{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange})),r.a.createElement(O.a,{variant:"primary",type:"submit",block:!0},"Sign Up")))}}]),t}(n.Component),B=Object(s.k)(_),z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={profile:{first_name:"",last_name:"",email:""},errors:[],success:!1},a.handleSubmit=function(e){e.preventDefault(),C.a.patch("/api/users",a.state.profile).then(function(e){e.data&&a.setState(function(e){return Object(b.a)({},e,{errors:[],success:!0})})}).catch(function(e){console.log(e.response.data.error);var t=[{message:"Something went wrong, please try again"}];400===e.response.status&&e.response.data.error&&(t=e.response.data.error),a.setState(function(e){return Object(b.a)({},e,{errors:t,success:!1})})})},a.handleChange=function(e){var t=Object(b.a)({},a.state);t.profile[e.target.name]=e.target.value,a.setState(t)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loggedIn?C.a.get("/api/users").then(function(t){var a=t.data,n=a.first_name,r=a.last_name,o=a.email;e.setState({profile:{first_name:n,last_name:r,email:o}})}).catch(function(t){401===t.response.status&&(e.props.authorized(!1),e.props.history.push({pathname:"/"})),console.log(t)}):this.props.history.push({pathname:"/"})}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(S,{errors:this.state.errors}),this.state.success?r.a.createElement(y.a,{variant:"success"},"Profile Updated."):null,r.a.createElement(w.a,{onSubmit:this.handleSubmit},r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"First Name"),r.a.createElement(w.a.Control,{type:"text",placeholder:"Enter First Name",name:"first_name",value:this.state.profile.first_name,onChange:this.handleChange})),r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Last Name"),r.a.createElement(w.a.Control,{type:"text",placeholder:"Enter Last Name",name:"last_name",value:this.state.profile.last_name,onChange:this.handleChange})),r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Email address"),r.a.createElement(w.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:this.state.profile.email,onChange:this.handleChange})),r.a.createElement(w.a.Group,{controlId:"formBasicPassword"},r.a.createElement(w.a.Label,null,"New Password"),r.a.createElement(w.a.Control,{type:"password",placeholder:"Password",name:"password",autocomplete:"off",onChange:this.handleChange})),r.a.createElement(O.a,{variant:"primary",type:"submit",block:!0},"Sign Up")))}}]),t}(n.Component),N=Object(d.b)(function(e){return{loggedIn:e.auth.authorized}},function(e){return{authorized:function(t){return e(k(t))}}})(Object(s.k)(z));var P=function(){return r.a.createElement("main",{className:"main"},r.a.createElement("nav",{className:"main-nav"},r.a.createElement(E,null)),r.a.createElement(s.d,{path:"/signup",exact:!0,component:B}),r.a.createElement(s.d,{path:"/profile",exact:!0,component:N}),r.a.createElement(s.d,{path:"/",exact:!0,component:I}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(11),x=a(26),D={authorized:!1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHORIZED":return Object(b.a)({},e,{authorized:t.authorized});default:return e}},A=Object(x.b)({auth:U}),F=function(){return Object(x.c)(A)},R=r.a.createElement(G.BrowserRouter,null,r.a.createElement(d.a,{store:F()},r.a.createElement(P,null)));l.a.render(R,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},57:function(e,t,a){e.exports=a(102)},62:function(e,t,a){},63:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.a66c5d37.chunk.js.map